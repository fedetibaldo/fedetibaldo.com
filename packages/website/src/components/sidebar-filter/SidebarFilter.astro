---
import FormField, { getMessage, type AnyFormField } from "./FormField.astro";

type Props = {
	class?: string | undefined;
	emptyFilterMessage?: string;
	formFields?: AnyFormField[];
};

const {
	class: className = "",
	formFields = [],
	emptyFilterMessage = "",
} = Astro.props;

const messages = formFields
	.map(getMessage)
	.filter((message): message is string => !!message)
	.join(", ");
---

<p class={`${className} text-grey-500 leading-tightest py-6 bg-grey-900 z-10`}>
	{messages ? `filter: ${messages}` : emptyFilterMessage}
</p>
{
	formFields.length > 0 && (
		<form class="js:hidden">
			{formFields.map((field) => (
				<FormField {...field} />
			))}
			<button>Submit</button>
		</form>
	)
}
