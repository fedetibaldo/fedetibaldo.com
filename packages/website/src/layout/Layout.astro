---
import { settings } from "../settings";
import { entries } from "../entries";
import Footer from "./Footer.astro";
import "../index.css";
import GameCard from "../components/GameCard.astro";
import PostCard from "../components/PostCard.astro";

interface Props {
	title?: string | undefined;
	description?: string | undefined;
	mainWidth?: "1/2" | "3/5";
}

const {
	title,
	description = settings.siteDescription,
	mainWidth = "1/2",
} = Astro.props;
---

<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" href="/favicon.svg" />

		<title>{[title, settings.siteTitle].filter(Boolean).join(" | ")}</title>
		<meta name="description" content={description} />
	</head>

	<body>
		<div class="container lg:grid grid-cols-10 min-h-full items-end">
			<div
				class={`${mainWidth == "3/5" ? "col-span-6 lg:pr-8" : "col-span-5 lg:pr-3"} sticky bottom-0 min-h-fit max-h-dvh h-full flex flex-col justify-between`}
			>
				<header class="py-6">
					<a class="title text-custom-gradient" href="/">
						{settings.siteTitle}
					</a>
				</header>
				<main class="pt-8 pb-12">
					<slot />
				</main>
				<Footer class="hidden lg:block" />
			</div>
			<aside
				class="col-start-7 xl:col-start-8 h-full col-span-4 xl:col-span-3 lg:pl-8 space-y-6 lg:pt-20 pb-6"
			>
				{
					entries.map((entry) =>
						entry.collection == "posts" ? (
							<PostCard {...entry} />
						) : (
							<GameCard {...entry} />
						),
					)
				}
			</aside>
			<Footer class="lg:hidden" />
		</div>
	</body>
</html>
