---
import type { CollectionEntry } from "astro:content";
import { Layout } from "../features/layout";
import { getEntry as getAstroEntry } from "astro:content";
import { render } from "astro:content";
import { getEntries as getWebsiteEntries } from "../features/entries";

const home = await getAstroEntry("pages", "home");

const getPageContentOrNull = async (page?: CollectionEntry<"pages">) => {
	if (!page) return null;
	const { Content } = await render(page);
	return Content;
};

const Content = await getPageContentOrNull(home);

const sidebarEntries = await getWebsiteEntries();
---

<Layout
	title={home?.data.title}
	description={home?.data.description}
	sidebar={{
		type: "filterable",
		defaultFilter: { showOutdated: false },
		entries: sidebarEntries,
	}}
>
	<article class="prose max-w-2xl">
		<h1 class="text-ds-headline-1 mb-4">Hello</h1>
		{Content && <Content />}
	</article>
</Layout>
